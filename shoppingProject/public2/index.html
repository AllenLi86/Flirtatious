<!DOCTYPE html>
<html lang="en">

<head>
	<link rel="icon" href="images/icon_5.jpg" type="image/jpg" sizes="16x16">
	<title>Flirtatious - Dior</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

	<div class="super_container">
		<div class="products">
			<div class="container">
				<div class="row">
					<div class="col-12">
						<div class="sidebar_left clearfix">
							<!-- Price -->
							<div class="sidebar_section">
								<div class="sidebar_section_content">
									<div class="filter_price" style="padding-top: 0px; margin-top: 10px;">
										<div>
											<h3 style="font-size: 20px;">輸入您的預算!</h3>
											<input type="number" id="minPrice"
												style="width: 79px; margin-right: 25px; font-size: 20px;"
												placeholder="最低價"><span style="font-size: 30px;">~</span>
											<input type="number" id="maxPrice"
												style="width: 79px; margin-left: 25px; font-size: 20px;"
												placeholder="最高價">
										</div>
										<br>
										<div>
											<input type="radio" id="redstick" name="beauty" value="1" checked>
											<label for="redstick" style="font-size:15px;">口紅</label>

											<input type="radio" id="bag" name="beauty" value="2"
												style="margin-left: 30px;">
											<label for="bag" style="font-size:15px;">包包</label>

											<input type="radio" id="perfume" name="beauty" value="3"
												style="margin-left: 30px;">
											<label for="perfume" style="font-size:15px;">香水</label>
										</div>
										<br>
										<button class="clear_price_btn" id="clear_price_btn">Enter</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="js/jquery-3.2.1.min.js"></script>

	<script>
		$(function () {
			var List;

			var minPrice, maxPrice, c;

			async function downloadAndRefreshUI() {
				var P = $.ajax({
					type: "get",
					url: "http://localhost:3000/dior/priceSort"
				})
				var result = await P;
				List = JSON.parse(result);
				// refreshUI();
			}
			downloadAndRefreshUI();

			function refreshUI() {
				// 價格篩選按鈕
				$("#clear_price_btn").on("click", async function () {
					minPrice = $("#minPrice").val();
					maxPrice = $("#maxPrice").val();
					c = $('input[name=beauty]:checked').val();

					var dataToServer = {
						minPrice: minPrice,
						maxPrice: maxPrice,
						c: c
					}

					var p = $.ajax({
						type: "get",
						url: "http://localhost:3000/dior/priceSort",
						data: dataToServer
					});

					var result = await p;
					List = JSON.parse(result);
				})
			}
			refreshUI();
		})
	</script>

</body>

</html>